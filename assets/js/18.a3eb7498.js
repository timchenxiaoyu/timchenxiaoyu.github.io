(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{242:function(a,s,e){"use strict";e.r(s);var t=e(0),n=Object(t.a)({},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"kata-containers安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kata-containers安装","aria-hidden":"true"}},[a._v("#")]),a._v(" Kata Containers安装")]),a._v(" "),e("h3",{attrs:{id:"安装运行时"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装运行时","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装运行时")]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('source /etc/os-release\nsudo yum -y install yum-utils\nARCH=$(arch)\nBRANCH="${BRANCH:-master}"\nsudo -E yum-config-manager --add-repo "http://download.opensuse.org/repositories/home:/katacontainers:/releases:/${ARCH}:/${BRANCH}/CentOS_${VERSION_ID}/home:katacontainers:releases:${ARCH}:${BRANCH}.repo"\nsudo -E yum -y install kata-runtime kata-proxy kata-shim\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("h3",{attrs:{id:"安装docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装docker","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装Docker")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\nsudo yum -y install docker-ce\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h3",{attrs:{id:"修改运行时"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改运行时","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改运行时")]),a._v(" "),e("p",[a._v("将docker运行时修改为kata-containers ，通过 /etc/docker/daemon.json:")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('{\n  "default-runtime": "kata-runtime",\n  "runtimes": {\n    "kata-runtime": {\n      "path": "/usr/bin/kata-runtime"\n    }\n  }\n}\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("重启docker")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("sudo systemctl daemon-reload\nsudo systemctl restart docker\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h3",{attrs:{id:"验证"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证","aria-hidden":"true"}},[a._v("#")]),a._v(" 验证")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker run -it --privileged=true xxx/library/busybox sh\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v('可以在容内通过"date -s"命令修改时钟，我们知道传统的docker容器是共享主机时钟的，无法修改容器时间\n但kata-containers拥有独立的内核，允许设置单独的时钟。')])])},[],!1,null,null,null);s.default=n.exports}}]);