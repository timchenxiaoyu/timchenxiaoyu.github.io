(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{204:function(e,s,r){"use strict";r.r(s);var a=r(0),n=Object(a.a)({},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"故障排查"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#故障排查","aria-hidden":"true"}},[e._v("#")]),e._v(" 故障排查")]),e._v(" "),r("p",[e._v("首先查看物理层面")]),e._v(" "),r("h3",{attrs:{id:"故障一，网络慢"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#故障一，网络慢","aria-hidden":"true"}},[e._v("#")]),e._v(" 故障一，网络慢")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("# ethtool  em1 | egrep 'Speed|Duplex'\n        Speed: 10000Mb/s  万兆网卡，速度没有问题\n        Duplex: Full\n\n#  ip -s addr show dev em1\n4: em1: <BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP> mtu 1500 qdisc mq master bond0 state UP group default qlen 1000\n    link/ether 24:6e:96:6b:49:30 brd ff:ff:ff:ff:ff:ff\n    RX: bytes  packets  errors  dropped overrun mcast\n    13638507738 32620635 6606110 0       0       150528\n    TX: bytes  packets  errors  dropped carrier collsns\n    65254658372 117883382 0       0       0       0\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br")])]),r("p",[e._v("发现RX 的errors非常高")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("\n# ethtool  -S em1|grep crc\n     rx_crc_errors: 6575704  crc\n     fcoe_bad_fccrc: 0\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br")])]),r("p",[e._v("具体发现是物理层故障，可能是网卡本身问题或者光纤问题。经排查，换根网线解决问题！")]),e._v(" "),r("h3",{attrs:{id:"故障二-overrun"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#故障二-overrun","aria-hidden":"true"}},[e._v("#")]),e._v(" 故障二 overrun")]),e._v(" "),r("p",[e._v("发现overrun 值不停增加，调整缓冲区大小")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("ethtool -G eth2 rx 2048\nethtool -G eth2 tx 2048\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("overrun 和drop啥区别呢？\ndropped 表示丢弃的数据包数，即数据包已经收到了 Ring Buffer，但因为内存不足等原因丢包；\noverruns 表示超限数据包数，即网络 I/O 速度过快，导致 Ring Buffer 中的数据包来不及处理（队列满）而导致的丢包；")]),e._v(" "),r("p",[e._v('当超过max_backlog后，后续的包将会被"drop"丢弃。')])])},[],!1,null,null,null);s.default=n.exports}}]);